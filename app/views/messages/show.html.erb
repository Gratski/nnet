<div ng-controller="conversation" ng-init="init(<%= @conversation.to_json %>,<%= @messages.to_json %>)">
  
  <div class="col-md-10 col-md-offset-1">

    <!-- TOP -->
    <div class="col-md-12">
      <a class="lead"><</a>
      <a href="/users/<%= @other_user.id %>" class="lead pull-right"><%= @other_user.name %>'s profile</a>
    </div>

    <!-- Messages box -->
    <div class="col-md-12" style="height:200px;">
      
      <!-- Messages list -->
      <div class="col-md-12" ng-repeat="message in messages">
        
        <!-- if is this user's message -->
        <div class="col-md-12"  ng-if="message.user_id != <%= @user.id %>">
          
          <div class="col-md-8 pull-right">
            <div class="col-md-8 text-right">
              {{message.body}}
            </div>
            <div class="col-md-4 text-right">
              friend
            </div>
          </div>

        </div>


        <!-- else -->
        <div class="col-md-12"  ng-if="message.user_id == <%= @user.id %>">
          
          <div class="col-md-8 pull-left">
            <div class="col-md-8 text-left">
              {{message.body}}
            </div>
          </div>

        </div>

      </div>
    </div>

    <!-- TYPING AREA -->  
    <div class="input-group">
      <textarea type="text" ng-model="message" class="form-control" placeholder="Type your message" aria-describedby="basic-addon1"></textarea>
      <span class="input-group-addon" ng-click="send(<%= @conversation.id %>, <%= @user.id %>)" id="basic-addon1">SEND</span>
    </div>

  </div>

</div>